<!-- Modern Dashboard with Statistics Cards -->
<div class="dashboard-container fade-in">
  <!-- Statistics Cards Row -->
  <div class="row mb-4">
    <div class="col-xl-3 col-md-6 mb-4">
      <div class="card stat-card bg-primary">
        <div class="card-body">
          <div class="stat-content">
            <div class="stat-icon">
              <i class="fas fa-file-alt"></i>
            </div>
            <div class="stat-details">
              <h3 class="stat-number">{{ totalLTAs }}</h3>
              <p class="stat-label">Total LTA</p>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="col-xl-3 col-md-6 mb-4">
      <div class="card stat-card bg-success">
        <div class="card-body">
          <div class="stat-content">
            <div class="stat-icon">
              <i class="fas fa-users"></i>
            </div>
            <div class="stat-details">
              <h3 class="stat-number">{{ totalClients }}</h3>
              <p class="stat-label">Clients Actifs</p>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="col-xl-3 col-md-6 mb-4">
      <div class="card stat-card bg-warning">
        <div class="card-body">
          <div class="stat-content">
            <div class="stat-icon">
              <i class="fas fa-dollar-sign"></i>
            </div>
            <div class="stat-details">
              <h3 class="stat-number">{{ totalRevenue | currency:'EUR':'symbol':'1.0-0' }}</h3>
              <p class="stat-label">Revenus Totaux</p>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="col-xl-3 col-md-6 mb-4">
      <div class="card stat-card bg-info">
        <div class="card-body">
          <div class="stat-content">
            <div class="stat-icon">
              <i class="fas fa-shipping-fast"></i>
            </div>
            <div class="stat-details">
              <h3 class="stat-number">{{ pendingShipments }}</h3>
              <p class="stat-label">En Transit</p>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Charts and Tables Row -->
  <div class="row">
    <!-- Recent LTAs -->
    <div class="col-lg-8 mb-4">
      <div class="card">
        <div class="card-header">
          <h5 class="card-title mb-0">
            <i class="fas fa-list-alt me-2"></i>
            LTA Récentes
          </h5>
        </div>
        <div class="card-body">
          <div class="table-responsive">
            <table class="table table-hover">
              <thead>
                <tr>
                  <th>N° LTA</th>
                  <th>Client</th>
                  <th>Route</th>
                  <th>Poids</th>
                  <th>Statut</th>
                  <th>Actions</th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let lta of recentLTAs">
                  <td>
                    <strong>{{ lta.ltaNumber }}</strong>
                  </td>
                  <td>{{ lta.client?.name || 'N/A' }}</td>
                  <td>
                    <span class="route-badge">
                      {{ lta.originCity.iataCode }} → {{ lta.destinationCity.iataCode }}
                    </span>
                  </td>
                  <td>{{ lta.totalWeight }} kg</td>
                  <td>
                    <span class="badge" [ngClass]="getStatusBadgeClass(lta.status)">
                      {{ getStatusLabel(lta.status) }}
                    </span>
                  </td>
                  <td>
                    <a class="btn btn-sm btn-outline-primary me-1" 
                       [routerLink]="['/lta/detail', lta.id]">
                      <i class="fas fa-eye"></i>
                    </a>
                    <a class="btn btn-sm btn-outline-secondary" 
                       [routerLink]="['/lta/edit', lta.id]">
                      <i class="fas fa-edit"></i>
                    </a>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
          <div class="text-center mt-3">
            <a routerLink="/lta/list" class="btn btn-primary">
              Voir Toutes les LTA
            </a>
          </div>
        </div>
      </div>
    </div>

    <!-- Quick Actions & Status -->
    <div class="col-lg-4 mb-4">
      <!-- Quick Actions -->
      <div class="card mb-4">
        <div class="card-header">
          <h5 class="card-title mb-0">
            <i class="fas fa-bolt me-2"></i>
            Actions Rapides
          </h5>
        </div>
        <div class="card-body">
          <div class="d-grid gap-2">
            <a class="btn btn-primary" routerLink="/lta/create">
              <i class="fas fa-plus me-2"></i>
              Créer Nouvelle LTA
            </a>
            <a class="btn btn-outline-primary" routerLink="/clients">
              <i class="fas fa-user-plus me-2"></i>
              Ajouter Client
            </a>
            <a class="btn btn-outline-primary" routerLink="/tariff/create">
              <i class="fas fa-tags me-2"></i>
              Configurer Tarif
            </a>
            <a class="btn btn-outline-warning" routerLink="/dashboard/currency-admin">
              <i class="fas fa-coins me-2"></i>
              Administration Devises
            </a>
            <a class="btn btn-outline-primary" routerLink="/reports">
              <i class="fas fa-chart-line me-2"></i>
              Voir Rapports
            </a>
          </div>
        </div>
      </div>

      <!-- Status Overview -->
      <div class="card">
        <div class="card-header">
          <h5 class="card-title mb-0">
            <i class="fas fa-chart-pie me-2"></i>
            Aperçu des Statuts
          </h5>
        </div>
        <div class="card-body">
          <div class="status-item" *ngFor="let status of statusOverview">
            <div class="status-info">
              <span class="status-label">{{ status.label }}</span>
              <span class="status-count">{{ status.count }}</span>
            </div>
            <div class="progress mb-2">
              <div class="progress-bar" 
                   [style.width.%]="status.percentage"
                   [ngClass]="status.class">
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- Routes Performance -->
  <div class="row">
    <div class="col-12">
      <div class="card">
        <div class="card-header">
          <h5 class="card-title mb-0">
            <i class="fas fa-route me-2"></i>
            Performance des Routes
          </h5>
        </div>
        <div class="card-body">
          <div class="table-responsive">
            <table class="table table-striped">
              <thead>
                <tr>
                  <th>Route</th>
                  <th>Nombre d'Expéditions</th>
                  <th>Poids Total</th>
                  <th>Revenus</th>
                  <th>Taux Moyen</th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let route of topRoutes">
                  <td>
                    <strong>{{ route.origin }} → {{ route.destination }}</strong>
                  </td>
                  <td>{{ route.shipmentCount }}</td>
                  <td>{{ route.totalWeight }} kg</td>
                  <td>{{ route.revenue | currency:'EUR':'symbol':'1.0-0' }}</td>
                  <td>{{ route.averageRate | currency:'EUR':'symbol':'1.2-2' }}/kg</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
