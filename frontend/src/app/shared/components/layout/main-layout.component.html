<!-- Modern Bootstrap Sidebar 02 Inspired Layout -->
<div class="wrapper">
  <!-- Mobile Overlay -->
  <div class="overlay" 
       [class.active]="!sidebarCollapsed" 
       (click)="toggleSidebar()"></div>

  <!-- Sidebar -->
  <nav id="sidebar" 
       [class.active]="sidebarCollapsed"
       [class.mobile-open]="!sidebarCollapsed">
    
    <!-- Sidebar Header -->
    <div class="sidebar-header">
      <div class="sidebar-brand">
        <div class="brand-icon">
          <i class="fas fa-shipping-fast"></i>
        </div>
        <div class="brand-text" *ngIf="!sidebarCollapsed">
          <h3>FreightOps</h3>
          <span>Logistics Platform</span>
        </div>
      </div>
      <button class="sidebar-close d-lg-none" 
              (click)="toggleSidebar()"
              aria-label="Fermer le menu">
        <i class="fas fa-times"></i>
      </button>
    </div>

    <!-- User Profile Section -->
    <div class="user-profile" *ngIf="!sidebarCollapsed">
      <div class="profile-img">
        <div class="avatar-circle">
          <i class="fas fa-user"></i>
        </div>
      </div>
      <div class="profile-info">
        <h4>Administrateur</h4>
        <p>admin&#64;freightops.com</p>
      </div>
    </div>

    <!-- Navigation Menu -->
    <ul class="list-unstyled components">
      
      <!-- Dashboard -->
      <li [class.active]="activeRoute === '/dashboard'">
        <a routerLink="/dashboard" 
           routerLinkActive="active"
           (click)="closeMobileSidebar()">
          <i class="fas fa-tachometer-alt"></i>
          <span *ngIf="!sidebarCollapsed">Dashboard</span>
        </a>
      </li>

      <!-- Fret Section -->
      <li class="dropdown" [class.active]="fretDropdownOpen">
        <a href="#fretSubmenu" 
           data-bs-toggle="collapse" 
           [attr.aria-expanded]="fretDropdownOpen"
           (click)="toggleFretDropdown()"
           class="dropdown-toggle">
          <i class="fas fa-truck"></i>
          <span *ngIf="!sidebarCollapsed">Fret & Transport</span>
        </a>
        <ul class="collapse list-unstyled" 
            id="fretSubmenu"
            [class.show]="fretDropdownOpen && !sidebarCollapsed">
          <li>
            <a routerLink="/fret/create-lta" 
               routerLinkActive="active"
               (click)="closeMobileSidebar()">
              <i class="fas fa-plus"></i>
              <span>Créer LTA</span>
            </a>
          </li>
          <li>
            <a routerLink="/fret/list-lta" 
               routerLinkActive="active"
               (click)="closeMobileSidebar()">
              <i class="fas fa-list"></i>
              <span>Liste LTA</span>
            </a>
          </li>
          <li>
            <a routerLink="/fret/report-manifest" 
               routerLinkActive="active"
               (click)="closeMobileSidebar()">
              <i class="fas fa-file-alt"></i>
              <span>Rapport Manifeste</span>
            </a>
          </li>
          <li>
            <a routerLink="/tracking" 
               routerLinkActive="active"
               (click)="closeMobileSidebar()">
              <i class="fas fa-map-marker-alt"></i>
              <span>Suivi Colis</span>
            </a>
          </li>
          <li>
            <a routerLink="/fret/depot-management" 
               routerLinkActive="active"
               (click)="closeMobileSidebar()">
              <i class="fas fa-warehouse"></i>
              <span>Gestion Dépôts</span>
            </a>
          </li>
        </ul>
      </li>

      <!-- Clients -->
      <li [class.active]="activeRoute === '/clients'">
        <a routerLink="/clients" 
           routerLinkActive="active"
           (click)="closeMobileSidebar()">
          <i class="fas fa-users"></i>
          <span *ngIf="!sidebarCollapsed">Clients</span>
        </a>
      </li>

      <!-- Tarifs -->
      <li [class.active]="activeRoute === '/tariff'">
        <a routerLink="/tariff" 
           routerLinkActive="active"
           (click)="closeMobileSidebar()">
          <i class="fas fa-tags"></i>
          <span *ngIf="!sidebarCollapsed">Tarifs</span>
        </a>
      </li>

      <!-- Villes -->
      <li [class.active]="activeRoute === '/cities'">
        <a routerLink="/cities" 
           routerLinkActive="active"
           (click)="closeMobileSidebar()">
          <i class="fas fa-map-marked-alt"></i>
          <span *ngIf="!sidebarCollapsed">Villes</span>
        </a>
      </li>

      <!-- Billetterie -->
      <li [class.active]="activeRoute === '/billetterie'">
        <a routerLink="/billetterie" 
           routerLinkActive="active"
           (click)="closeMobileSidebar()">
          <i class="fas fa-ticket-alt"></i>
          <span *ngIf="!sidebarCollapsed">Billetterie</span>
        </a>
      </li>

      <!-- Finances Section -->
      <li class="dropdown" [class.active]="financesDropdownOpen">
        <a href="#financesSubmenu" 
           data-bs-toggle="collapse" 
           [attr.aria-expanded]="financesDropdownOpen"
           (click)="toggleFinancesDropdown()"
           class="dropdown-toggle">
          <i class="fas fa-chart-line"></i>
          <span *ngIf="!sidebarCollapsed">Finances</span>
        </a>
        <ul class="collapse list-unstyled" 
            id="financesSubmenu"
            [class.show]="financesDropdownOpen && !sidebarCollapsed">
          <li>
            <a routerLink="/finances/tresorerie" 
               routerLinkActive="active"
               (click)="closeMobileSidebar()">
              <i class="fas fa-money-bill-wave"></i>
              <span>Trésorerie</span>
            </a>
          </li>
          <li>
            <a routerLink="/billing" 
               routerLinkActive="active"
               (click)="closeMobileSidebar()">
              <i class="fas fa-file-invoice-dollar"></i>
              <span>Facturation</span>
            </a>
          </li>
        </ul>
      </li>

      <!-- Comptabilité -->
      <li [class.active]="activeRoute === '/accounting/dashboard'">
        <a routerLink="/accounting/dashboard" 
           routerLinkActive="active"
           (click)="closeMobileSidebar()">
          <i class="fas fa-calculator"></i>
          <span *ngIf="!sidebarCollapsed">Comptabilité</span>
        </a>
      </li>

      <!-- Rapports -->
      <li [class.active]="activeRoute === '/reports'">
        <a routerLink="/reports" 
           routerLinkActive="active"
           (click)="closeMobileSidebar()">
          <i class="fas fa-chart-bar"></i>
          <span *ngIf="!sidebarCollapsed">Rapports</span>
        </a>
      </li>

    </ul>

    <!-- Sidebar Footer -->
    <div class="sidebar-footer">
      <div class="footer-content" *ngIf="!sidebarCollapsed">
        <div class="footer-info">
          <small>FreightOps v1.0.0</small>
          <small> 2024 Tous droits réservés</small>
        </div>
      </div>
      <div class="logout-section">
        <button class="btn-logout" 
                (click)="logout()"
                [attr.title]="sidebarCollapsed ? 'Déconnexion' : ''">
          <i class="fas fa-sign-out-alt"></i>
          <span *ngIf="!sidebarCollapsed">Déconnexion</span>
        </button>
      </div>
    </div>

  </nav>

  <!-- Page Content -->
  <div id="content" [class.sidebar-collapsed]="sidebarCollapsed">
    
    <!-- Top Navigation Bar -->
    <nav class="navbar navbar-expand-lg navbar-light bg-white">
      <div class="container-fluid">
        
        <!-- Sidebar Toggle Button -->
        <button type="button" 
                id="sidebarCollapse" 
                class="btn btn-info"
                (click)="toggleSidebar()">
          <i class="fas fa-align-left"></i>
          <span class="d-none d-md-inline">Toggle Sidebar</span>
        </button>

        <!-- Page Title -->
        <h4 class="page-title mb-0 ms-3">{{ pageTitle }}</h4>

        <!-- Top Navigation Items -->
        <div class="navbar-nav ms-auto d-flex flex-row align-items-center">
          
          <!-- Currency Selector -->
          <app-currency-selector class="me-3"></app-currency-selector>
          
          <!-- Search Bar -->
          <div class="search-container me-3 d-none d-md-block">
            <div class="input-group">
              <input type="text" 
                     class="form-control" 
                     placeholder="Rechercher..."
                     aria-label="Rechercher">
              <button class="btn btn-outline-secondary" type="button">
                <i class="fas fa-search"></i>
              </button>
            </div>
          </div>
          
          <!-- Notifications -->
          <div class="nav-item me-3">
            <button class="btn btn-link position-relative notification-btn" 
                    aria-label="Notifications">
              <i class="fas fa-bell"></i>
              <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger">
                3
                <span class="visually-hidden">notifications non lues</span>
              </span>
            </button>
          </div>

          <!-- Settings -->
          <div class="nav-item">
            <button class="btn btn-link settings-btn" 
                    aria-label="Paramètres">
              <i class="fas fa-cog"></i>
            </button>
          </div>
          
        </div>
      </div>
    </nav>

    <!-- Main Content Area -->
    <main class="main-content">
      <router-outlet></router-outlet>
    </main>

    <!-- Footer -->
    <footer class="content-footer">
      <div class="container-fluid">
        <div class="row align-items-center">
          <div class="col-md-6">
            <span class="text-muted small">
              2024 FreightOps. Plateforme de gestion logistique.
            </span>
          </div>
          <div class="col-md-6 text-md-end">
            <span class="text-muted small">
              Développé avec par l'équipe FreightOps
            </span>
          </div>
        </div>
      </div>
    </footer>

  </div>
</div>
