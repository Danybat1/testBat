<!-- Tariff Detail Component -->
<div class="tariff-detail-container">
  <div class="container-fluid">
    
    <!-- Loading State -->
    <div class="loading-container text-center py-5" *ngIf="loading">
      <div class="spinner-border text-primary" role="status">
        <span class="visually-hidden">Loading...</span>
      </div>
      <p class="mt-3 text-muted">Chargement des détails du tarif...</p>
    </div>

    <!-- Tariff Details -->
    <div *ngIf="!loading && tariff">
      
      <!-- Header -->
      <div class="row mb-4">
        <div class="col-12">
          <div class="d-flex justify-content-between align-items-start">
            <div class="d-flex align-items-center">
              <button 
                type="button"
                class="btn btn-outline-primary me-3"
                (click)="goBack()">
                <i class="bi bi-arrow-left"></i>
              </button>
              <div class="header-info">
                <h1 class="h3 mb-1">Tarif #{{ tariff.id }}</h1>
                <p class="text-muted mb-0">
                  {{ tariff.originCity.name }} → {{ tariff.destinationCity.name }}
                </p>
              </div>
            </div>
            
            <div class="header-actions">
              <button 
                type="button"
                class="btn btn-outline-primary me-2"
                (click)="editTariff()">
                <i class="bi bi-pencil me-1"></i>
                Modifier
              </button>
              <button 
                type="button"
                class="btn btn-outline-danger"
                (click)="deleteTariff()">
                <i class="bi bi-trash me-1"></i>
                Supprimer
              </button>
            </div>
          </div>
        </div>
      </div>

      <!-- Status Card -->
      <div class="row mb-4">
        <div class="col-12">
          <div class="card status-card">
            <div class="card-body">
              <div class="d-flex justify-content-between align-items-center">
                <div>
                  <h4 class="mb-2">Statut du tarif</h4>
                  <span [class]="'badge fs-6 ' + getStatusClass(tariff.isActive || false)">
                    {{ getStatusLabel(tariff.isActive || false) }}
                  </span>
                </div>
                <div>
                  <i class="bi bi-currency-exchange display-4 text-primary"></i>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Main Information Cards -->
      <div class="row">
        
        <!-- Route Information -->
        <div class="col-12 col-lg-6 mb-4">
          <div class="card info-card">
            <div class="card-header">
              <h5 class="card-title mb-0">
                <i class="bi bi-route me-2"></i>
                Informations de route
              </h5>
            </div>
            <div class="card-body">
              <div class="route-info">
                <div class="route-item">
                  <div class="route-origin">
                    <i class="bi bi-geo-alt-fill origin-icon"></i>
                    <div class="route-content">
                      <h6>Origine</h6>
                      <p class="city-name">{{ tariff.originCity.name }}</p>
                      <p class="city-details">
                        <span class="iata-code">{{ tariff.originCity.iataCode }}</span>
                        <span class="country">{{ tariff.originCity.country }}</span>
                      </p>
                    </div>
                  </div>
                  
                  <div class="route-arrow">
                    <i class="bi bi-arrow-right"></i>
                  </div>
                  
                  <div class="route-destination">
                    <i class="bi bi-geo-alt destination-icon"></i>
                    <div class="route-content">
                      <h6>Destination</h6>
                      <p class="city-name">{{ tariff.destinationCity.name }}</p>
                      <p class="city-details">
                        <span class="iata-code">{{ tariff.destinationCity.iataCode }}</span>
                        <span class="country">{{ tariff.destinationCity.country }}</span>
                      </p>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Pricing Information -->
        <div class="col-12 col-lg-6 mb-4">
          <div class="card info-card">
            <div class="card-header">
              <h5 class="card-title mb-0">
                <i class="bi bi-calculator me-2"></i>
                Informations tarifaires
              </h5>
            </div>
            <div class="card-body">
              <div class="pricing-info">
                <div class="pricing-item">
                  <label>Taux par kilogramme</label>
                  <span class="value rate-value">€{{ tariff.kgRate | number:'1.2-2' }}</span>
                </div>
                
                <div class="pricing-item" *ngIf="tariff.volumeCoeffV1">
                  <label>Coefficient volume V1</label>
                  <span class="value">{{ tariff.volumeCoeffV1 | number:'1.4-4' }}</span>
                </div>
                
                <div class="pricing-item" *ngIf="tariff.volumeCoeffV2">
                  <label>Coefficient volume V2</label>
                  <span class="value">{{ tariff.volumeCoeffV2 | number:'1.4-4' }}</span>
                </div>
                
                <div class="pricing-item" *ngIf="tariff.volumeCoeffV3">
                  <label>Coefficient volume V3</label>
                  <span class="value">{{ tariff.volumeCoeffV3 | number:'1.4-4' }}</span>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Validity Period -->
        <div class="col-12 mb-4" *ngIf="tariff.effectiveFrom || tariff.effectiveUntil">
          <div class="card info-card">
            <div class="card-header">
              <h5 class="card-title mb-0">
                <i class="bi bi-calendar-range me-2"></i>
                Période de validité
              </h5>
            </div>
            <div class="card-body">
              <div class="validity-info">
                <div class="validity-item">
                  <label>Période effective</label>
                  <span class="value">{{ getEffectiveDateRange() }}</span>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Timestamps -->
        <div class="col-12 mb-4">
          <div class="card info-card">
            <div class="card-header">
              <h5 class="card-title mb-0">
                <i class="bi bi-clock-history me-2"></i>
                Informations temporelles
              </h5>
            </div>
            <div class="card-body">
              <div class="timestamps-info">
                <div class="row">
                  <div class="col-md-6">
                    <div class="timestamp-item">
                      <label>Créé le</label>
                      <span class="value">{{ tariff.createdAt | date:'dd/MM/yyyy à HH:mm' }}</span>
                    </div>
                  </div>
                  <div class="col-md-6" *ngIf="tariff.updatedAt">
                    <div class="timestamp-item">
                      <label>Modifié le</label>
                      <span class="value">{{ tariff.updatedAt | date:'dd/MM/yyyy à HH:mm' }}</span>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

      </div>
    </div>

  </div>
</div> 